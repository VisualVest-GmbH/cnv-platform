<script src="/red/resources/@cnv-platform/cnv-core/shared/main.js"></script>
<link rel="stylesheet" href="/red/resources/@cnv-platform/cnv-core/shared/main.css">
<script src="/red/resources/@cnv-platform/cnv-core/bodymovin/5.7.4/lottie.min.js"></script>

<script type="text/javascript">

    RED.nodes.registerType('lottie-animation-config', {
        category: 'config',
        defaults: {
            name: {
                value:"",
                required: true
        },
            description: {
                value: ""
            },
            animation: {
                value:"",
                required: true
            }
        },


        label: function() {
            return this.name || "Lottie Animation";
        },
        oneditprepare: function() {
            $('#node-config-input-animation').on('input', (event) => renderLottiePreview(event.target.value, 'lottie-preview'));
            setTimeout(()=> {
                renderLottiePreview(this.animation, 'lottie-preview');
            }, 150);
        }

    });
</script>

<script type="text/html" data-template-name="lottie-animation-config">
    <div class="form-row">
        <label for="node-config-input-name">
            <i class="fa fa-tag"></i>
            Name
        </label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-description">
            <i class="fa fa-tag"></i>
            Description
        </label>
        <input type="text" id="node-config-input-description" placeholder="Description">
    </div>

    <div class="form-row">
        <label for="node-config-input-animation">
            <i class="fa fa-tag"></i>
            animation
        </label>
        <textarea id="node-config-input-animation" name="node-config-input-animation" class="node-config-input-animation" style='width: 100%; height: 150px'></textarea>
    </div>

    <div class="form-row">
        <h2>Preview:</h2>
        <div id="lottie-preview" style="width: 300px;"></div>
    </div>

</script>

<script type="text/html" data-help-name="lottie-animation-config">
    <p>Easy config to manage Lottie compatible files</p>
    <p>The extrated ouput from Bodymovin plugin for Adobe After Effects could be imported as JSON. </p>

</script>
